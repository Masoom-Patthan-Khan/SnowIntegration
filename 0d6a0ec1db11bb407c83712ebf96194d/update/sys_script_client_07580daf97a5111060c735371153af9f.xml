<?xml version="1.0" encoding="UTF-8"?><record_update sys_domain="global" table="sys_script_client">
    <sys_script_client action="INSERT_OR_UPDATE">
        <active>false</active>
        <applies_extended>false</applies_extended>
        <condition/>
        <description>This client script is expected to run only once when user is trying to create/edit the endpoint after install/upgrade. It asks customer for their consent on telemetry data collection.</description>
        <field>api_token</field>
        <global>true</global>
        <isolate_script>true</isolate_script>
        <messages/>
        <name>customer consent</name>
        <order/>
        <script><![CDATA[/************************************************************
* Copyright (c) 2022-2023 VMware, Inc. All Rights Reserved.
* You may not use this product except in compliance with the License.
* This product may include a number of subcomponents with separate copyright notices and license terms. Your use of these subcomponents is subject to the terms and conditions of the subcomponent's license, as noted in the LICENSE file.
*************************************************************/

function onLoad() {
    var ga = new GlideAjax('x_vmw_cloudservice.CSClientScriptBridge');
    ga.addParam('sysparm_name', 'getCustomerConsentProperty');
    ga.getXML(result);
   
    function result(response) {
        var answer = response.responseXML.documentElement.getAttribute('answer');
        if (answer == 'true' || answer == true) {
            var gm1 = new GlideModal("glide_ask_standard", false, 600);
            gm1.setPreference("title", "As part of Customer Experience Improvement Program VMware would like to get your consent to receive telemetry data from this instance for VMware's internal quality assurance purposes. Please click on Yes if you agree or click on No to ignore.");
            gm1.setPreference("onPromptComplete", consentYes);
            gm1.setPreference("onPromptCancel", consentNo);
            gm1.render();
        }
    }

    function consentYes() {
		var ga = new GlideAjax('x_vmw_cloudservice.CSClientScriptBridge');
            ga.addParam('sysparm_name', 'setCustomerConsentValueProperty');
            ga.addParam('sysparm_value', true+'');
            ga.getXML(result2);

            function result2(response) {
            }
    }

    function consentNo() {
		var ga = new GlideAjax('x_vmw_cloudservice.CSClientScriptBridge');
            ga.addParam('sysparm_name', 'setCustomerConsentValueProperty');
                ga.addParam('sysparm_value', false+'');
            ga.getXML(result2);

            function result2(response) {
            }
    }
}]]></script>
        <sys_class_name>sys_script_client</sys_class_name>
        <sys_created_by>admin</sys_created_by>
        <sys_created_on>2022-09-01 07:51:56</sys_created_on>
        <sys_domain>global</sys_domain>
        <sys_domain_path>/</sys_domain_path>
        <sys_id>07580daf97a5111060c735371153af9f</sys_id>
        <sys_mod_count>43</sys_mod_count>
        <sys_name>customer consent</sys_name>
        <sys_overrides/>
        <sys_package display_value="VMware Aria Automation Plugin" source="x_vmw_cloudservice">0d6a0ec1db11bb407c83712ebf96194d</sys_package>
        <sys_policy/>
        <sys_scope display_value="VMware Aria Automation Plugin">0d6a0ec1db11bb407c83712ebf96194d</sys_scope>
        <sys_update_name>sys_script_client_07580daf97a5111060c735371153af9f</sys_update_name>
        <sys_updated_by>admin</sys_updated_by>
        <sys_updated_on>2023-04-05 06:42:36</sys_updated_on>
        <table>x_vmw_cloudservice_register_cas_organization</table>
        <type>onLoad</type>
        <ui_type>10</ui_type>
        <view/>
    </sys_script_client>
</record_update>
